erDiagram
    %% ========================================
    %% SNS 도메인
    %% 테이블: 5개
    %% ========================================

    posts {
        bigint id PK
        bigint challenge_id FK
        bigint author_id FK "users.id"
        varchar title
        text content
        varchar category "NOTICE | GENERAL | QUESTION | REVIEW"
        int like_count
        int comment_count
        timestamp created_at
        timestamp updated_at
        timestamp deleted_at
    }

    post_images {
        bigint id PK
        bigint post_id FK
        varchar image_url
        int display_order
        timestamp created_at
    }

    post_likes {
        bigint id PK
        bigint post_id FK
        bigint user_id FK
        timestamp created_at
    }

    comments {
        bigint id PK
        bigint post_id FK
        bigint author_id FK "users.id"
        bigint parent_id FK "comments.id (self-ref)"
        text content
        int like_count
        timestamp created_at
        timestamp updated_at
        timestamp deleted_at
    }

    comment_likes {
        bigint id PK
        bigint comment_id FK
        bigint user_id FK
        timestamp created_at
    }

    challenges {
        bigint id PK
        varchar name
    }

    users {
        bigint id PK
        varchar name
    }

    %% 관계
    challenges ||--o{ posts : "has"
    users ||--o{ posts : "writes"
    posts ||--o{ post_images : "has"
    posts ||--o{ post_likes : "has"
    users ||--o{ post_likes : "likes"
    posts ||--o{ comments : "has"
    users ||--o{ comments : "writes"
    comments ||--o{ comments : "replies_to"
    comments ||--o{ comment_likes : "has"
    users ||--o{ comment_likes : "likes"