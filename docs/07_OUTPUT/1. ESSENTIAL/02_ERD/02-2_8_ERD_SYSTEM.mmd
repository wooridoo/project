erDiagram
    %% ========================================
    %% 시스템 도메인 (System Domain)
    %% 테이블: 5개
    %% ========================================

    notifications {
        bigint id PK
        bigint user_id FK
        varchar type "VOTE | MEETING | EXPENSE | COMMENT | SYSTEM"
        varchar title
        varchar message
        varchar reference_type
        bigint reference_id
        boolean is_read
        timestamp read_at
        timestamp created_at
    }

    notification_settings {
        bigint id PK
        bigint user_id FK
        boolean push_enabled
        boolean email_enabled
        boolean vote_notification
        boolean meeting_notification
        boolean expense_notification
        boolean comment_notification
        timestamp created_at
        timestamp updated_at
    }

    reports {
        bigint id PK
        bigint reporter_id FK "users.id"
        varchar target_type "USER | POST | COMMENT | CHALLENGE"
        bigint target_id
        varchar reason "SPAM | ABUSE | INAPPROPRIATE | FRAUD | OTHER"
        varchar description
        varchar status "PENDING | REVIEWING | RESOLVED | DISMISSED"
        bigint handled_by FK "admins.id"
        varchar handle_result
        timestamp handled_at
        timestamp created_at
        timestamp updated_at
    }

    sessions {
        bigint id PK
        bigint user_id FK
        varchar session_token UK
        varchar device_info
        varchar ip_address
        varchar session_type "WEB | MOBILE | API"
        timestamp expires_at
        timestamp created_at
        timestamp updated_at
    }

    webhook_logs {
        bigint id PK
        varchar event_type
        varchar target_url
        text request_body
        int response_status
        text response_body
        int retry_count "max 3"
        varchar status "PENDING | SUCCESS | FAILED"
        timestamp next_retry_at "1min, 5min, 30min"
        timestamp created_at
        timestamp updated_at
    }

    users {
        bigint id PK
        varchar name
    }

    admins {
        bigint id PK
        varchar name
    }

    %% 관계
    users ||--o{ notifications : "receives"
    users ||--o{ notification_settings : "configures"
    users ||--o{ reports : "creates"
    admins ||--o{ reports : "handles"
    users ||--o{ sessions : "has"